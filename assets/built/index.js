!function(){"use strict";async function t(t){try{const e="https://plausible.sivert.io/api/stats/golf.sivert.io/top-stats/",r=(new Date).toISOString().split("T")[0],o=new URLSearchParams({period:"all",date:r,filters:JSON.stringify([["is","event:page",[t]]]),with_imported:"true",comparison:"previous_period",compare_from:"undefined",compare_to:"undefined",match_day_of_week:"true"}),n=await fetch(`${e}?${o.toString()}`);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const i=await n.json(),s=i.top_stats.find((t=>"Total visits"===t.name))?.value||0;return console.log(`Total unique visitors for ${t}:`,s),s}catch(e){return console.error(`Failed to fetch total visitors for ${t}:`,e),"Error"}}function e(t){return t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:t.toString()}!function(){let r=document.querySelector('link[rel="next"]')?.getAttribute("href");if(!r)return;document.querySelectorAll(".post").forEach((r=>{const o=r.querySelector(".gh-card-link")?.getAttribute("href"),n=document.getElementById(o);o&&n&&t(o).then((t=>{const r=e(t);n.textContent=`${r} views`}))})),new IntersectionObserver(((o,n)=>{o.forEach((o=>{o.isIntersecting&&r&&async function(t){try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch page");const r=await e.text(),o=(new DOMParser).parseFromString(r,"text/html"),n=o.querySelectorAll(".post"),i=o.querySelector('link[rel="next"]')?.getAttribute("href");return{posts:n,nextLink:i}}catch(t){throw new Error(t)}}(r).then((o=>{let{posts:i,nextLink:s}=o;const c=document.querySelector(".gh-postfeed");i.forEach((r=>{c.append(r);const o=r.querySelector(".gh-card-link")?.getAttribute("href"),n=r.querySelector(".gh-card-meta[id]");o&&n&&t(o).then((t=>{const r=e(t);n.textContent=`${r} views`}))})),s?(r=s,n.observe(document.querySelector(".post:last-of-type"))):n.disconnect()})).catch((t=>console.error("Failed to fetch next page:",t)))}))}),{rootMargin:"150px"}).observe(document.querySelector(".post:last-of-type"))}()}();
//# sourceMappingURL=index.js.map
